 <!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>NHQEF CLO Development Tool</title>
<style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background: #f8f9fa;
      color: #212529;
    }
    h2 {
      color: #007bff;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 1rem;
    }
    select, input[type="text"] {
      margin: 0.5rem 0;
      padding: 0.4rem;
    }
    .ga-line {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      margin-top: 0.5rem;
    }
    .confirmed-list {
      margin-top: 1rem;
      padding-left: 1rem;
    }
    button {
      margin-top: 1rem;
      padding: 0.6rem 1.2rem;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 4px;
      margin-right: 1rem;
    }
    button:hover {
      background-color: #0056b3;
    }
    #step2 {
      display: none;
      margin-top: 2rem;
    }
    #gaButtons {
      margin-top: 1rem;
    }
  
.highlight-label {
  animation: flashHighlight 1s ease-in-out 2;
  background-color: #fff3cd;
  border-radius: 5px;
  padding: 0.2rem 0.5rem;
}
@keyframes flashHighlight {
  0% { background-color: #fff3cd; }
  50% { background-color: #ffeeba; }
  100% { background-color: #fff3cd; }
}

#introBox {
  width: 260px;
  background-color: #f4f4ff;
  border-right: 4px solid #6f42c1;
  padding: 1rem;
  margin: 1rem 1.5rem;
  font-size: 0.95rem;
  color: #333;
  float: right;
  border-radius: 8px;
  box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
}
#introBox h3 {
  font-size: 1.2rem;
  margin-bottom: 0.5rem;
}
#introBox p {
  margin: 0.3rem 0;
}
</style>
</head>
<body>     
<div style="text-align: center; margin-top: 1.5rem; margin-bottom: 2rem;">
<h2 style="color: #003366;">Ready-to-use, Evolving Tool for Developing Graduate Attributes (or Program Learning Outcomes) and Course Learning Outcomes</h2>
<p style="font-style: italic; color: #333;">(A flexible, evolving guide inspired from NEP 2020's holistic education goals)</p>
</div>
<div style="max-width: 1000px; margin: 1.5rem auto; padding: 1rem 1.5rem; background-color: #fff3cd; border-left: 6px solid #ffbf00; border-radius: 8px; font-size: 0.95rem; color: #4a4a4a; line-height: 1.5;">  
<p><strong>This evolving tool/guide</strong>, inspired by the <strong>National Higher Education Qualifications Framework (NHEQF) (UGC, 2022)</strong> and <strong>National Education Policy (NEP) 2020</strong>, recognizes two types of Graduate Attributes (GAs): <strong>Standard</strong> and <strong>Aspirational</strong>.</p>
  
  <ul style="margin-left: 1rem; padding-left: 1rem;">
    <li><strong>Standard</strong> ‚Äì closely follow NHQEF recommendations for Level 4.5.</li>
    <li><strong>Aspirational</strong> ‚Äì include <em>Student Contribution</em> and <em>Subject Evolution</em> for student-centered learning and humanized learning outcomes to better align with NEP 2020‚Äôs emphasis on holistic development. The aspirational categories are informed by Praveen Chhikara‚Äôs research on student-centered and humanized learning.</li>
  </ul>

  <p style="margin-top: 0.5rem;"><strong>Note:</strong></p>
  <ul style="margin-left: 1rem; padding-left: 1rem;">
    <li>This tool should be viewed as a flexible guide rather than a fixed framework.</li>
    <li><em>Questions or comments?</em> Feel free to reach out to Praveen Chhikara.</li>
    <li> Graduate Attribute (GA) = Program Learning Outcomes (for this tool). Course Learning Outcomes (CLOs) are different.</li>
  </ul>
</div>
<div style="display: flex; justify-content: center;">
  <div id="introBox" style="width: 90%; padding: 20px; background-color: #f9f9f9; border-left: 5px solid purple; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
    <h3 style="margin-top: 0; color: #4b0082;">Who is this tool for?</h3>
    <p> <strong>Indian universities, colleges, and faculty members </strong> to develop meaningful Course Learning Outcomes (CLOs) aligned with NEP 2020.</p>

    <h3 style="margin-top: 0; color: #4b0082;">This tool is designed by</h3>
    <p>Praveen Chhikara, a passionate researcher in <em>mathematics education</em> in the United States.</p>
  </div>
</div>

<section>
<h2>Step 1: Develop around 8 Graduate Attributes (or Program Learning Outcomes) for your program</h2>
<label for="programName">Program Name (e.g., BSc Mathematics):</label>
<input id="programName" placeholder="Enter program name" style="width: 100%;" type="text"/>
<label for="zerothSelect">Select Outcome Type:</label>
<select id="zerothSelect">
<option value="">-- Select an outcome type --</option>
<option value="1">Standard Outcome</option>
<option value="2">Aspirational Outcomes</option>
</select>
<label for="broadGA">Select a Graduate Attribute (GA):</label>
<div id="gaHintPopup" style="display:none; position:absolute; background:#fffae6; color:#333; border:1px solid #ccc; padding:0.6rem; border-radius:5px; box-shadow:2px 2px 5px rgba(0,0,0,0.2); z-index:1000; font-weight:bold;">
  üëâ Do this
</div>
<select id="broadGA">
<option value="">-- Select a GA --</option>
</select>
<label for="gaSelect">Select a Sub-Graduate Attribute:</label>
<select id="gaSelect">
<option value="">-- Select a Sub-GA --</option>
</select>
<p id="exampleDisplay" style="font-style: italic; color: #6c757d;"></p><div id="sentenceStructure" style="margin-top: 1rem;"></div>
<div id="gaButtons" style="display:none">
<button onclick="if (isGAInputValid()) saveGA()">Save the above GA &amp; Add another</button>
<button onclick="if (isGAInputValid()) finalizeGA()">Save the above GA &amp; No more GAs to Add</button>
</div>
<div class="confirmed-list" style="background-color: #e9f7ef; border-left: 6px solid #2ecc71; padding: 1rem; border-radius: 6px;">
<h3 style="color: #1e8449;">Your Graduate Attributes will appear below after completing Step 1.</h3>
<ul id="gaList" style="font-weight: bold; font-size: 1.05rem;"></ul>
</div>
<div id="preStep2Buttons" style="margin-top: 2rem; display: none;">
<button onclick="document.getElementById('step2').style.display='block'; scrollAndHighlightCourseInput();" style="background-color: #ffc107; color: black;">Continue to CLO Development for above GAs</button>
</div>
</section>
<section id="step2">
<h2>Step 2: Develop Course Learning Outcomes (CLOs)</h2>
<div id="courseHintPopup" style="display:none; position:absolute; background:#eaf7ff; color:#005073; border:1px solid #ccc; padding:0.6rem; border-radius:5px; box-shadow:2px 2px 5px rgba(0,0,0,0.2); z-index:1000; font-weight:bold;">
  ‚úèÔ∏è Write the subject name
</div>
<label for="courseNameStep2">Course/Subject Name (e.g., Calculus):</label>
<input id="courseNameStep2" placeholder="Enter course name" style="width: 100%;" type="text"/>
<div id="cloHintPopup" style="display:none; position:absolute; background:#eaffea; color:#2e7d32; border:1px solid #b2dfdb; padding:0.6rem; border-radius:5px; box-shadow:2px 2px 5px rgba(0,0,0,0.2); z-index:1000; font-weight:bold;">
  ‚úÖ Develop another CLO for the GA selected above.
</div>
<label for="gaSelectDropdown" style="margin-top:1rem; color: #d63384; font-weight: bold;">Choose a GA to Develop a CLO for this Course</label>
<select id="gaSelectDropdown" style="margin-bottom: 1rem;"></select>
<div id="cloDisplayBlock" style="margin-top: 1rem;"></div>
<div id="step2SubGABlocksContainer" style="margin-top: 2rem;"></div><button id="showCLOSummaryButton" style="background-color: #dc3545; color: white; margin-top: 2rem;">View all finalized GAs and CLOs in a tabulated format</button><div id="cloSummaryTable" style="display:none; margin-top:2rem;"></div>
</section>
<script>
const gaOptions = {
    "Knowledge and Understanding": ["Knowledge/Understanding-Concept", "Knowledge/Understanding-Procedure", "Knowledge/Understanding-Linking Ideas"],
  "Generic Learning Outcomes": ["Skill-Task Completion", "Skill-Analyze", "Skill-Select/Evaluate"],
  "Application of Knowledge and Skills": ["Application of Knowledge", "Application of Skill"],
  "General, Tech, and Prof. Skills": ["Gen-Communication-Write/Oral/Read/Listen", "Gen-OwnLearning", "Gen-Critical/Judge/Responsibility"],
"Constitutional, Humanistic, Ethical Values": ["Ethic-Practice-Constitution/Human/Moral"],
    "Employability and Entrepreneurship": ["Empl-Job readiness", "Empl-Group work", "Empl-Responsible for self-work"],
    "Student Contribution": ["Student Contribution ‚Äì Pose Meaningful Questions", "Student Contribution ‚Äì Show learning from peers", "Student Contribution ‚Äì Show Listening Ability and Empathy", "Student Contribution ‚Äì Show Contribution to Peer Learning", "Student Contribution ‚Äì Taking Conceptual Risks"],
    "Subject Evolution": ["Subject Evolution ‚Äì Over Time", "Subject Evolution ‚Äì Human Contribution"]
};

const confirmedGAs = [];
const sentenceStructures = {
  "Knowledge/Understanding-Concept": {
    template: ["Graduates will be able to", "[verb]", "[core facts/concepts/principles/theories/processes]", "of", "[chosen fields of discipline, if applicable, in its interdisciplinary contexts]"],
    verbs: ["demonstrate","understand", "grasp"]
  },
    "Knowledge/Understanding-Linking Ideas": {
    template: ["Graduates will be able to", "[verb]", "[concepts/theories/principles within discipline and, if relevant, across interdisciplinary domains.]"],
    verbs: ["connect", "relate", "integrate"]
  },
 "Knowledge/Understanding-Procedure": {
    template: ["Graduates will be able to", "[verb]", "standard", "[procedures/methods/techniques]", "used in", "[discipline and related interdisciplinary contexts.]"],
    verbs: ["apply", "perform", "demonstrate"]
  }, 
"Skill-Task Completion": {
    template: ["Graduates will be able to", "[verb]", "[technical and cognitive tasks relevant to discipline and, if applicable, interdisciplinary contexts]", "such as", "[examples here.]"],
    verbs: ["perform", "carry out", "operate"]
  },
  
"Skill-Analyze": {
    template: ["Graduates will be able to", "[verb]", "problems involving", "[disciplinary or interdisciplinary]", "using", "[analytical methods from discipline, and if relevant, in interdisciplinary contexts.]"],
    verbs: ["analyze", "evaluate", "synthesize"]
  },
"Skill-Select/Evaluate": {
    template: ["Graduates will be able to", "[verb]", "appropriate tools and methods in", "[discipline]", "to determine effective approaches for solving problems in", "[disciplinary or interdisciplinary contexts.]"],
    verbs: ["select", "evaluate", "assess"]
  },
"Application of Knowledge": {
    template: ["Graduates will be able to", "[verb]", "[conceptual knowledge of discipline]", "to solve problems/issues in", "[real-world or simulated interdisciplinary contexts.]"],
    verbs: ["apply", "use", "transfer"]
  },
"Application of Skill": {
    template: ["Graduates will be able to", "[verb]", "[model]", "using disciplinary skills in", "[disciplinary or interdisciplinary projects.]"],
    verbs: ["generate", "perform", "develop", "construct", "execute"],
    model: ["models", "solutions", "products"]
  },
"Gen-Communication-Write/Oral/Read/Listen": {
    template: ["Graduates will be able to", "[verb]", "[disciplinary ideas]", "clearly and effectively through", "[oral, written, and/or visual formats]", "for", "[expert and/or general audiences.]"],
    verbs: ["communicate", "express", "convey", "articulate", "present"]
  },
"Gen-OwnLearning": {
    template: ["Graduates will be able to", "[verb]", "their own", "[learning process and progress]", "to support academic development in", "[disciplinary or interdisciplinary contexts]"],
    verbs: ["manage", "reflect", "monitor", "plan", "evaluate"]
  },
"Gen-Critical/Judge/Responsibility": {
    template: ["Graduates will be able to", "[verb]", "the", "[reliability, validity, rigor, and/or applicability]", "of", "[disciplinary approaches or arguments]", "by analyzing", "[evidence and/or data]", "from", "[disciplinary and/or interdisciplinary contexts.]"],
    verbs: ["evaluate", "judge", "reason", "analyze", "appraise"]
  },
"Empl-Job readiness": {
    template: ["Graduates will be able to", "[verb]",  "[disciplinary knowledge and/or skills]", "to meet", "[job-specific responsibilities.]"],
    verbs: ["perform", "apply", "demonstrate", "carry out", "execute"]
  },
"Empl-Group work": {
    template: ["Graduates will be able to", "[verb]", "[concepts/theories/principles]", "in", "[disciplinary or multidisciplinary contexts]"],
    verbs: ["understand", "demonstrate", "develop", "articulate"]
  },
"Empl-Responsible for self-work": {
    template: ["Graduates will be able to", "[verb]", "[their own responsible contributions]", "by completing", "[disciplinary tasks]", "accurately and independently."],
    verbs: ["take responsibility for", "demonstrate accountability for", "manage"]
  },
"Ethic-Practice-Constitution/Human/Moral": {
    template: ["Graduates will be able to", "[verb]", "[ethical principles and values]", "while", "[applying disciplinary knowledge.]"],
    verbs: ["practice", "value", "embody"]
  },
"Student Contribution ‚Äì Pose Meaningful Questions": {
    template: ["Graduates will be able to", "[verb]", "meaningful and challenging questions that deepen understanding and promote further inquiry of", "[disciplinary understanding.]"],
    verbs: ["contribute", "inquire", "develop", "articulate"]
  },
"Student Contribution ‚Äì Show learning from peers": {
    template: ["Graduates will be able to", "[verb]", "knowledge and understanding of", "[disciplinary understanding]", "by building on peers‚Äô ideas and contributions in collaborative settings."],
    verbs: ["engage", "contribute", "build on"] 
  },
"Student Contribution ‚Äì Show Listening Ability and Empathy": {
    template: ["Graduates will be able to", "[verb]", "diverse approaches to support", "[disciplinary learning]", "with thoughtful response in group contexts."],
    verbs: ["emphasize", "respect", "engage in"] 
  },
"Student Contribution ‚Äì Show Contribution to Peer Learning": {
    template: ["Graduates will be able to", "[verb]", "peer learning by offering meaningful disciplinary input that supports shared understanding in collaborative settings."],
    verbs: ["contribute", "support", "co-construct"] 
  },
"Student Contribution ‚Äì Taking Conceptual Risks": {
    template: ["Graduates will be able to", "[verb]", "peer learning by offering meaningful disciplinary input that supports shared understanding in collaborative settings."],
    verbs: ["contribute", "support", "co-construct"] 
  },
 "SubjectEvol-Over Time": {
    template: ["Graduates will be able to", "[verb]", "key", "[concepts/theories/principles]", "in", "[disciplinary or multidisciplinary contexts]"],
    verbs: ["understand", "demonstrate", "develop", "articulate"]
  },
"SubjectEvol-Human": {
    template: ["Graduates will be able to", "[verb]", "key", "[concepts/theories/principles]", "in", "[disciplinary or multidisciplinary contexts]"],
    verbs: ["understand", "demonstrate", "develop", "articulate"]
  },
};
  const calculusExamples = {
  "Knowledge/Understanding-Concept": "Graduates will be able to understand foundational mathematical concepts and principles of pure and applied mathematics.",
"Knowledge/Understanding-Linking Ideas": "Graduates will be able to connect mathematical concepts across different branches of mathematics.",  
"Knowledge/Understanding-Procedure": "Graduates will be able to apply standard mathematical procedures used in calculus, algebra, and computational mathematics.",
  "Skill-Task Completion": "Graduates will be able to perform technical tasks in mathematics such as solving equations, constructing mathematical models, and analyzing datasets using mathematical software.",
  "Skill-Analyze": "Graduates will be able to analyze mathematical problems involving real-world systems using calculus and linear algebra.",
  "Skill-Select/Evaluate": "Graduates will be able to evaluate tools and methods in mathematics to determine effective approaches for solving problems in science and engineering.",
  "Application of Knowledge": "Graduates will be able to apply mathematical knowledge to solve problems in physics, economics, and life sciences.",
  "Application of Skill": "Graduates will be able to understand key mathematical concepts and theorems in pure and applied mathematics.",
  "Gen-Communication-Write/Oral/Read/Listen": "Graduates will be able to communicate mathematical reasoning and conclusions clearly and effectively in oral and written formats for expert and general audiences.",
  "Gen-OwnLearning": "Graduates will be able to reflect on their own learning strategies and progress to support continued academic development in mathematics.",
  "Gen-Critical/Judge/Responsibility": "Graduates will be able to evaluate the applicability of mathematical arguments by analyzing evidence from mathematical reasoning.",
  "Empl-Job readiness": "Graduates will be able to apply data analysis and quantitative reasoning to meet expectations in industry-based roles.",
  "Empl-Group work": "Graduates will be able to understand key mathematical concepts and theorems in pure and applied mathematics.",
  "Empl-Responsible for self-work": "Graduates will be able to take responsibility for the accuracy and clarity of mathematical results and computations.",
  "Ethic-Practice-Constitution/Human/Moral": "Graduates will be able to embody academic integrity and responsibility while doing mathematical analysis and reporting.",
  "Student Contribution ‚Äì Pose Meaningful Questions": "Graduates will be able to inquire meaningful and challenging questions that deepen understanding and promote further inquiry of pure and applied mathematics.",
  "Student Contribution ‚Äì Show learning from peers": "Graduates will be able to build on knowledge and understanding of mathematics by building on peers‚Äô ideas and contributions in collaborative settings.",
  "Student Contribution ‚Äì Show Listening Ability and Empathy": "Graduates will be able to engage in diverse approaches to support mathematical learning with thoughtful response in group contexts.",
"Student Contribution ‚Äì Show Contribution to Peer Learning": "Graduates will be able to co-construct peer learning by offering meaningful disciplinary input that supports shared understanding in collaborative settings.",
 "Student Contribution ‚Äì Taking Conceptual Risks": "Graduates will be able to co-construct peer learning by offering meaningful disciplinary input that supports shared understanding in collaborative settings.",
"SubjectEvol-Over Time": "Graduates will be able to understand key mathematical concepts and theorems in pure and applied mathematics.",
  "SubjectEvol-Human": "Graduates will be able to understand key mathematical concepts and theorems in pure and applied mathematics."
  };


const broadGASelect = document.getElementById("broadGA");
const subGASelect = document.getElementById("gaSelect");
const sentenceStructureDiv = document.getElementById("sentenceStructure");
const gaList = document.getElementById("gaList");
const gaButtons = document.getElementById("gaButtons");
const preStep2Buttons = document.getElementById("preStep2Buttons");


function populateBroadGAs(category = "") {
  broadGASelect.innerHTML = '<option value="">-- Select a sub-GA --</option>';
  let allowedKeys = [];

  if (category === "1") {
    allowedKeys = ["Knowledge and Understanding", "Generic Learning Outcomes", "Application of Knowledge and Skills", "General, Tech, and Prof. Skills", "Constitutional, Humanistic, Ethical Values", "Employability and Entrepreneurship"];
  } else if (category === "2") {
    allowedKeys = ["Student Contribution", "Subject Evolution"];
  } 

  Object.keys(gaOptions).forEach(ga => {
    if (!category || allowedKeys.includes(ga)) {
      const opt = document.createElement("option");
      opt.value = ga;
      opt.textContent = ga;
      broadGASelect.appendChild(opt);
    }
  });

  updateSubGAs(); // Reset sub-GAs
}


function updateSubGAs() {
  const selectedGA = broadGASelect.value;
  subGASelect.innerHTML = '<option value="">-- Select a sub-GA Type --</option>';
  

  sentenceStructureDiv.innerHTML = '';

  gaButtons.style.display = 'none';
  if (selectedGA && gaOptions[selectedGA]) {
    gaOptions[selectedGA].forEach(sub => {
      const opt = document.createElement("option");
      opt.value = sub;
      opt.textContent = sub;
      subGASelect.appendChild(opt);
  const subGALabel = document.querySelector('label[for="gaSelect"]');
  if (subGALabel) {
    subGALabel.classList.add("highlight-label");
    subGALabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => subGALabel.classList.remove("highlight-label"), 2000);
  }

    });
  }
}


function updateSentenceStructure() {
  const selectedSubGA = subGASelect.value;
  const structure = sentenceStructures[selectedSubGA];

  

  sentenceStructureDiv.innerHTML = '';

  const exampleText = calculusExamples[selectedSubGA];
  const exampleDisplay = document.getElementById("exampleDisplay");
  if (exampleDisplay) {
    exampleDisplay.textContent = exampleText ? "Example (BSc Mathematics): " + exampleText : "No example available yet for this Sub-GA.";
  }

  if (structure) {
    const container = document.createElement("div");
    container.className = "ga-line";
    structure.template.forEach(part => {
      if (part === "[verb]") {
        const sel = document.createElement("select");
        structure.verbs.forEach(v => {
          const opt = document.createElement("option");
          opt.value = v;
          opt.textContent = v;
          sel.appendChild(opt);
        });
        container.appendChild(sel);
      } else if (part.startsWith("[")) {
        const input = document.createElement("input");
        input.type = "text";
      input.placeholder = "" + part.slice(1, -1);
      input.style.width = "320px";
        container.appendChild(input);
      } else {
        const span = document.createElement("span");
        span.textContent = part + ' ';
        container.appendChild(span);
      }
    });
    sentenceStructureDiv.appendChild(container);
    gaButtons.style.display = 'block';
  const sentenceDiv = document.getElementById("sentenceStructure");
  if (sentenceDiv) {
    sentenceDiv.classList.add("highlight-label");
    sentenceDiv.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => sentenceDiv.classList.remove("highlight-label"), 2000);
  }

  } else {
    gaButtons.style.display = 'none';
  }
}


function saveGA() {
  const subGA = subGASelect.value;
  const structure = sentenceStructures[subGA];
  const inputs = sentenceStructureDiv.querySelectorAll('select, input');
  const staticParts = structure.template;
  let sentence = '';
  let inputIndex = 0;
  staticParts.forEach(part => {
    if (part === "[verb]" || part.startsWith("[")) {
      sentence += ' ' + inputs[inputIndex].value;
      inputIndex++;
    } else {
      sentence += ' ' + part;
    }
  });
  if (!sentence.endsWith('.')) sentence += '.';
  const li = document.createElement("li");
  const gaIndex = gaList.children.length + 1;
  const gaText = `${subGA}: ${sentence}`;
  li.textContent = `${gaIndex}. ${gaText}`;
  const deleteButton = document.createElement("button");
  deleteButton.textContent = "Delete";
  deleteButton.style.marginLeft = "10px";
  deleteButton.onclick = () => {
    if (confirm("Are you sure you want to delete this GA?")) {
      gaList.removeChild(li);
      updateStep2Dropdown();
    }
  };
  li.appendChild(deleteButton);


  const editButton = document.createElement("button");
  editButton.textContent = "Edit";
  editButton.style.marginLeft = "10px";
  editButton.onclick = () => {
    const gaCategory = Object.keys(gaOptions).find(key => gaOptions[key].includes(subGA));
    if (gaCategory) {
      broadGASelect.value = gaCategory;
      updateSubGAs();
      setTimeout(() => {
        subGASelect.value = subGA;
        updateSentenceStructure();
      }, 100);
    }
  };
  li.appendChild(editButton);
  gaList.appendChild(li);
  

  sentenceStructureDiv.innerHTML = '';

  gaButtons.style.display = 'none';
  broadGASelect.value = "";
  subGASelect.innerHTML = '<option value="">-- Select Sub-GA --</option>';
  updateSubGAs();
  
  // Scroll and highlight the GA label
  const labelElement = document.querySelector('label[for="zerothSelect"]');
  if (labelElement) {
    labelElement.classList.add("highlight-label");
    labelElement.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => labelElement.classList.remove("highlight-label"), 2000);
  }

}

function finalizeGA() {
  saveGA();
  updateStep2Dropdown();
  preStep2Buttons.style.display = 'block';
  const preStep2 = document.getElementById('preStep2Buttons');
  if (preStep2) {
    preStep2.classList.add('highlight-label');
    preStep2.scrollIntoView({ behavior: 'smooth', block: 'center' });
    setTimeout(() => preStep2.classList.remove('highlight-label'), 2000);
  }
}

broadGASelect.addEventListener("change", updateSubGAs);
subGASelect.addEventListener("change", () => {
  updateSentenceStructure();
  gaButtons.style.display = 'block';
  const sentenceDiv = document.getElementById("sentenceStructure");
  if (sentenceDiv) {
    sentenceDiv.classList.add("highlight-label");
    sentenceDiv.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => sentenceDiv.classList.remove("highlight-label"), 2000);
  }

});

function isGAInputValid() {
  const inputs = sentenceStructureDiv.querySelectorAll('select, input');
  for (const input of inputs) {
    if (!input.value.trim()) {
      alert("Please fill all fields and select verbs before proceeding.");
      return false;
    }
  }
  return true;
}
function cleanPlaceholder(part) {
  const p = part.slice(1, -1).trim();
  const map = {
    "particular key concepts/theories": "particular key concepts/theories",
      "in disciplinary or interdisciplinary contexts.": "in disciplinary or interdisciplinary contexts.",
    "two or more specific key ideas in the subject and, if relevant, interdisciplinary contexts.": "two or more specific key ideas in the subject and, if relevant, interdisciplinary contexts.",
      "in mathematical topic in disciplinary or interdisciplinary contexts.": "in mathematical topic in disciplinary or interdisciplinary contexts.",
   "a particular concept": "a particular concept",
       "procedural techniques for solving problems related to the subject and, if possible, interdisciplinary contexts.": "procedural techniques for solving problems related to the subject and, if possible, interdisciplinary contexts.",
        "topic and, if relevant in interdisciplinary contextual problems.": "topic and, if relevant in interdisciplinary contextual problems.",
       "discipline-specific problems, if relevant, in interdisciplinary contexts.": "discipline-specific problems, if relevant, in interdisciplinary contexts.",
       "two or more specific concepts": "two or more specific concepts",
       "different domains or aspects of the subject or interdisciplinary sources": "different domains or aspects of the subject or interdisciplinary sources",
       "specific topic(s) in the subject": "specific topic(s) in the subject",
      "specific topics in the subject": "specific topics in the subject",
      "problems": "problems",
      "applied contexts.": "applied contexts.",
      "representations or models to address disciplinary, or interdisciplinary problems": "representations or models to address disciplinary, or interdisciplinary problems",
      "format(s) such as oral, visual, and/or written": "format(s) such as oral, visual, and/or written",
      "audiences.": "audiences.",
      "instructor‚Äôs/peers‚Äô comments or course activities.": "instructor‚Äôs/peers‚Äô comments or course activities.",
      "accuracy, efficiency, or relevance": "accuracy, efficiency, or relevance",
      "using an approach from the subject": "using an approach from the subject",
      "do a disciplinary task involving specific topic of the subject": "do a disciplinary task involving specific topic of the subject",
      "data, evidence, or theoretical justifications of the topic.": "data, evidence, or theoretical justifications of the topic.",
      "discipline-based project or task": "discipline-based project or task",
      "knowledge/approach": "knowledge/approach",
      "real/simulated context": "real/simulated context",
      "the ethical aspects of performing or sharing tasks": "the ethical aspects of performing or sharing tasks",
      "group activity": "group activity",
      "purpose": "purpose",
      "learning goals/tasks": "learning goals/tasks",
      "ethical/humanistic value": "ethical/humanistic value",
      "decision/context": "decision/context",
      "group activity": "group activity",
      "knowledge and/or skills from specific topic(s) of the subject": "knowledge and/or skills from specific topic(s) of the subject",
      "job-related tasks": "job-related tasks"
      
  };
  return map[p] || p;
}


const cloTemplates = {
  "Knowledge/Understanding-Concept": {
    verbs: ["define", "describe", "explain", "classify", "summarize"],
    template: ["Students will be able to", "[verb]", "[particular key concepts/theories]", "[in disciplinary or interdisciplinary contexts.]"],
    example: "Students will be able to describe the concept of limits and continuity in single-variable calculus."
  },
  "Knowledge/Understanding-Procedure": {
    verbs: ["execute", "implement", "solve", "use", "operate"],
    template: ["Students will be able to", "[verb]", "problems involving", "[a particular concept]", "using", "[procedural techniques for solving problems related to the subject and, if possible, interdisciplinary contexts]"],
    example: "Students will be able to solve problems involving derivatives using standard differentiation techniques."
  },
  "Knowledge/Understanding-Linking Ideas": {
    verbs: ["compare", "contrast", "map", "associate", "synthesize"],
    template: ["Students will be able to", "[verb]", "[two or more specific key ideas in the subject, and, if possible, interdisciplinary contexts.]"],
    example: "Students will be able to synthesize concepts of rates of change from calculus with their applications in population biology and economics."
  },
  "Skill-Task Completion": {
    verbs: ["use", "calculate", "build", "simulate", "follow"],
    template: ["Students will be able to", "[verb]", "key procedural tasks related to", "[topic and, if relevant in interdisciplinary contextual problems.]"],
    example: "Students will be able to calculate derivatives of trigonometric functions."
  },
  "Skill-Analyze": {
    template: ["Students will be able to", "[verb]", "relationships between", "[two or more specific concepts]", "from", "[different domains or aspects of the subject or interdisciplinary sources.]"],
    verbs: ["break down", "differentiate", "interpret", "infer"],
    example: "Students will be able to interpret relationships between the concepts of limits and instantaneous rate of change from graphical, numerical, and real-world motion contexts."
  },
  "Skill-Select/Evaluate": {
    verbs: ["choose", "justify", "critique", "test", "recommend"],
    template: ["Students will be able to", "[verb]", "appropriate techniques or strategies for solving problems related to", "[specific topic(s) in the subject.]"],
    example: "Students will be able to choose appropriate techniques or strategies for solving problems related to implicit differentiation."
  },
  "Application of Knowledge": {
    verbs: ["demonstrate", "adapt", "implement"],
    template: ["Students will be able to", "[verb]", "conceptual knowledge of", "[specific topics in the subject]", "to", "[problems]", "in", "[applied contexts.]"],
    example: "Students will be able to solve optimization problems in cost and revenue functions."
  },
  "Application of Skill": {
    verbs: ["design", "construct", "test", "produce", "revise", "simulate", "model"],
    template: ["Students will be able to", "[verb]", "[representations or models to address disciplinary, or interdisciplinary problems]", "using techniques from", "[specific topics in the subject.]"],
    example: "Students will be able to construct graphs of functions using techniques from derivatives to analyze change over time."
  },
  "Gen-Communication-Write/Oral/Read/Listen": {
    verbs: ["write", "present", "discuss", "summarize", "interpret", "listen", "explain", "justify"],
    template: ["Students will be able to", "[verb]", "disciplinary concepts from", "[specific topics in the subject]", "using", "[format(s) such as oral, visual, and/or written]", "for", "[audiences.]"],
    example: "Students will be able to discuss step-by-step solutions to integral problems using an oral format for both peers and instructors."
  },
  "Gen-OwnLearning": {
    verbs: ["identify", "propose", "investigate", "monitor", "revise", "adjust", "track", "document"],
    template: ["Students will be able to", "[verb]", "their learning strategies related to ", "[specific topics in the subject]", "based on", "[instructor‚Äôs/peers‚Äô comments or course activities.]"],
    example: "Students will be able to revise their learning strategies related to integration techniques and approaches based on course activities and peer discussions."
  },
  "Gen-Critical/Judge/Responsibility": {
    verbs: ["assess", "justify", "critique", "argue", "conclude", "verify", "challenge", "analyze"],
    template: ["Students will be able to", "[verb]", "the", "[accuracy, efficiency, or relevance]", "of", "[using an approach from the subject]", "to", "[do a disciplinary task involving specific topic of the subject]", "based on", "[data, evidence, or theoretical justifications of the topic.]"],
    example: "Students will be able to justify the relevance of using of L‚ÄôH√¥pital‚Äôs Rule to evaluate limits based on evidence of correctness of limits."
  },
  "Empl-Job readiness": {
    verbs: ["implement", "deliver", "follow protocols", "document", "report", "maintain"],
    template: ["Students will be able to", "[verb]", "[knowledge and/or skills from specific topic(s) of the subject]", "to complete", "[job-related tasks]", "effectively and responsibly."],
    example: "Students will be able to implement skills related to standard problem-solving steps for derivatives to complete engineering design tasks effectively and responsibly."
  },
  "Empl-Group work": {
    verbs: ["support", "negotiate", "coordinate", "present"],
    template: ["Students will be able to", "[verb]", "collaboratively on","[discipline-based project or task]", "related to", "[specific topics in the subject.]"],
    example: "Students will be able to present collaboratively on a solution strategy for real-life problems based on the rate of change."
  
  },
  "Empl-Responsible for self-work": {
    verbs: ["complete", "organize", "reflect", "plan", "fulfill"],
    template: ["Students will be able to", "[verb]" , "assignments on", "[specific topics in the subject]", "independently and with accountability."],
    example: "Students will be able to complete their problem sets on limits and continuity independently and with accountability."
  },
  "Ethic-Practice-Constitution/Human/Moral": {
    verbs: ["respond", "justify", "reflect", "act", "advocate"],
    template: ["Students will be able to", "[verb]", "[the ethical aspects of performing or sharing tasks]", "related to", "[specific topic(s) in the subject.]"],
    example: "Students will be able to justify the responsible use of proper citation and accuracy in solving real-world calculus problems."
  },
  "Student Contribution ‚Äì Pose Meaningful Questions": {
    verbs: ["articulate", "formulate"],
    template: ["Students will be able to", "[verb]", "relevant/challenging questions related to", "[topic]", "to", "[extend understanding or open up new directions]", "for inquiry in disciplinary or interdisciplinary contexts."],
    example: "Students will be able to formulate challenging questions related to continuity and differentiability to open up new directions for inquiry in calculus and its applications."
  },
  "Student Contribution ‚Äì Show learning from peers": {
    verbs: ["build on others' ideas", "apply peer input", "extend peer reasoning", "reflect on contributions"],
    template: ["Students will be able to", "[verb]", "related to", "[topic]", "to deepen disciplinary understanding in group discussions or collaborative work."],
    example: "Students will be able to apply peer input related to methods of solving maxima-minima problems to deepen disciplinary understanding in group discussions or collaborative work."
  },
  "Student Contribution ‚Äì Show Listening Ability and Empathy": {
    verbs: ["listen actively", "acknowledge", "paraphrase", "affirm", "reflect back"], 
    template: ["Students will be able to", "[verb]", "peer contributions related to", "[topic]", "to support thoughtful disciplinary discussion through collaborative projects."],
    example: "Students will be able to acknowledge peer contributions related to interpretations of critical points of functions to support thoughtful disciplinary discussion through collaborative projects."
  },
  "Student Contribution ‚Äì Show Contribution to Peer Learning": {
    verbs: ["listen actively", "acknowledge", "paraphrase", "affirm", "reflect back"], 
    template: ["Students will be able to", "[verb]", "peer contributions related to", "[topic]", "to extend", "[disciplinary understanding]", "during collaborative problem-solving or discussion."],
     example: "Students will be able to extend peer ideas related to the chain rule to extend mathematical understanding during collaborative problem-solving."
  },
"Student Contribution ‚Äì Taking Conceptual Risks": {
    verbs: ["listen actively", "acknowledge", "paraphrase", "affirm", "reflect back"], 
    template: ["Students will be able to", "[verb]", "peer contributions related to", "[topic]", "to extend", "[disciplinary understanding]", "during collaborative problem-solving or discussion."],
     example: "Students will be able to extend peer ideas related to the chain rule to extend mathematical understanding during collaborative problem-solving."
  },
  "SubjectEvol-Over Time": {
    verbs: ["collaborate", "present", "build on others‚Äô ideas"],
    template: ["Students will be able to", "[verb]", "in", "[group activity]", "to", "[purpose]"],
    example: "Students will be able to collaborate in peer groups to build on others‚Äô ideas for solving challenging integration tasks."
  },
  "SubjectEvol-Human": {
    verbs: ["collaborate", "present", "build on others‚Äô ideas"],
    template: ["Students will be able to", "[verb]", "in", "[group activity]", "to", "[purpose]"],
    example: "Students will be able to collaborate in peer groups to build on others‚Äô ideas for solving challenging integration tasks."
  }
};

document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Choose Sub-Attribute (Sub-GA):"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  populateBroadGAs();
  updateStep2Dropdown();
});

document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const gaDropdown = document.getElementById("gaSelectDropdown");
  if (gaDropdown) {
    gaDropdown.addEventListener("change", displayCLOTemplate);
  }
});

</script>
<script>
  const { jsPDF } = window.jspdf;

  function obsoleteDownloadPDF() {
    const doc = new jsPDF();

    let y = 15;

    doc.setFontSize(18);
    doc.setFont("helvetica", "bold");
    doc.text("Graduate Attributes", 105, y, { align: "center" });

    y += 8;
    doc.setFontSize(12);
    doc.setFont("times", "italic");
    doc.text("(developed using NHQEF guide)", 105, y, { align: "center" });

    y += 15;
    doc.setFont("helvetica", "normal");
    doc.setFontSize(12);
    doc.text("Prepared by Praveen Chhikara", 14, y);
    y += 7;
    const program = document.getElementById("programName").value || "Same";
    doc.text(`Program: ${program}`, 14, y);

    y += 12;
    doc.setFillColor(41, 128, 185); // blue header
    doc.setTextColor(255, 255, 255);
    doc.rect(14, y - 5, 180, 8, "F");
    doc.text("Graduate Attribute (GA)", 16, y);

    y += 10;
    doc.setTextColor(0, 0, 0);

    const gaItems = document.querySelectorAll("#gaList li");
    gaItems.forEach((li, i) => {
      const text = li.textContent.replace("Edit", "").trim();
      const lines = doc.splitTextToSize(`${text}`, 180);
      if (y + lines.length * 7 > 280) {
        doc.addPage();
        y = 15;
      }
      doc.text(`${lines.join("\n")}`, 16, y);
      y += lines.length * 7;
    });

    y += 10;
    doc.setFont("times", "italic");
    doc.text("Best wishes,", 16, y);
    y += 7;
    doc.setFont("helvetica", "bold");
    doc.text("Praveen Chhikara", 16, y);

    doc.save("graduate_attributes.pdf");
  }

  document.querySelector('button[style*="background-color: #28a745"]')
    .addEventListener("click", downloadPDF);
</script>
<script>




function displayCLOTemplate() {
  const selectedGA = document.getElementById("gaSelectDropdown").value;
  const block = document.getElementById("cloDisplayBlock");
  block.innerHTML = "";

  if (!selectedGA) return;

  const label = document.createElement("label");
  label.textContent = "Now select the relevant Sub-GA for this GA:";
  label.style.fontWeight = "bold";
  block.appendChild(label);

  const dropdown = document.createElement("select");
  dropdown.innerHTML = '<option value="">-- Select Sub-GA --</option>';
  dropdown.style.marginLeft = "10px";

  Object.keys(cloTemplates).forEach(subga => {
    const opt = document.createElement("option");
    opt.value = subga;
    opt.textContent = subga;
    dropdown.appendChild(opt);
  });

  block.appendChild(dropdown);

  const output = document.createElement("div");
  output.id = "cloOutput";
  output.style.marginTop = "1rem";
  block.appendChild(output);

  dropdown.addEventListener("change", () => {
    const selectedSubGA = dropdown.value;
    output.innerHTML = "";

    const cloTemplate = cloTemplates[selectedSubGA];
    if (cloTemplate) {
      const label = document.createElement("p");
      label.textContent = "Sub-GA: " + selectedSubGA;
      label.style.fontWeight = "bold";
      label.style.color = "#0d6efd";
      output.appendChild(label);

      const example = document.createElement("p");
      example.textContent = "Example (Calculus): " + cloTemplate.example;
      example.style.fontStyle = "italic";
      example.style.color = "#6c757d";
      output.appendChild(example);

      const cloLine = document.createElement("div");
      cloLine.className = "ga-line";

      cloTemplate.template.forEach(part => {
        if (part === "[verb]") {
          const sel = document.createElement("select");
          cloTemplate.verbs.forEach(v => {
            const opt = document.createElement("option");
            opt.value = v;
            opt.textContent = v;
            sel.appendChild(opt);
          });
          cloLine.appendChild(sel);
        } else if (part.startsWith("[")) {
          const input = document.createElement("input");
          input.type = "text";
         input.placeholder = cleanPlaceholder(part);
          input.style.width = "280px";
          cloLine.appendChild(input);
        } else {
          const span = document.createElement("span");
          span.textContent = part + " ";
          cloLine.appendChild(span);
        }
      });

      output.appendChild(cloLine);
    }
  });
}

    });

    block.appendChild(cloLine);
  }
}

    });

    block.appendChild(cloLine);
  }
}

    });

    block.appendChild(cloLine);
  }
}

    });

    block.appendChild(cloLine);
  }
}

// Will be filled by Step 1 logic
const subGAMap = {};
</script><script>




function updateStep2Dropdown() {
  const gaSelectDropdown = document.getElementById("gaSelectDropdown");
  if (!gaSelectDropdown) return;

  const gaLines = document.querySelectorAll("#gaList li");
  gaSelectDropdown.innerHTML = '<option value="">-- Select a GA --</option>';

  gaLines.forEach((line) => {
    let text = line.textContent.replace("Edit", "").trim();
    let cleanValue = text.replace(/^\d+\.\s*/, "");  // remove leading "1. "
    const option = document.createElement("option");
    option.value = cleanValue;
    option.textContent = text;
    gaSelectDropdown.appendChild(option);
  });
}





document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const gaSelectDropdown = document.getElementById("gaSelectDropdown");
  if (!gaSelectDropdown) return;

  confirmedGAs.forEach(ga => {
    const option = document.createElement("option");
    option.value = ga.full;
    option.textContent = ga.full;
    gaSelectDropdown.appendChild(option);
    subGAMap[ga.full] = ga.subga;
  });
});
</script><script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const dropdown = document.getElementById("gaSelectDropdown");
  if (dropdown) {
    dropdown.addEventListener("change", displayCLOTemplate);
  }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const dropdown = document.getElementById("gaSelectDropdown");
  if (dropdown) {
    dropdown.addEventListener("change", displayCLOTemplate);
  }
});
</script>
<script>
function scrollAndHighlightCourseInput() {
  const label = document.querySelector("label[for='courseNameStep2']");
  if (label) {
    label.classList.add("highlight-label");
    label.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => label.classList.remove("highlight-label"), 2000);
  }
}
</script>
<script>
const step2SubGAOptions = [
  "Knowledge/Understanding-Concept",
  "Knowledge/Understanding-Procedure",
  "Knowledge/Understanding-Linking Ideas",
  "Skill-Task Completion",
  "Skill-Analyze",
  "Skill-Select/Evaluate",
  "Application of Knowledge",
  "Application of Skill",
  "Gen-Communication-Write/Oral/Read/Listen",
  "Gen-OwnLearning",
 "Gen-Critical/Judge/Responsibility",
  "Empl-Job readiness",
  "Empl-Group work",
  "Empl-Responsible for self-work",
  "Ethic-Practice-Constitution/Human/Moral",
  "Student Contribution ‚Äì Pose Meaningful Questions",
  "Student Contribution ‚Äì Show learning from peers",
  "Student Contribution ‚Äì Show Listening Ability and Empathy",
"Student Contribution ‚Äì Show Contribution to Peer Learning",
 "Student Contribution ‚Äì Taking Conceptual Risks",
  "SubjectEvol-Over Time",
  "SubjectEvol-Human"    
];

function handleGASelectStep2() {
  const container = document.getElementById("cloDisplayBlock");
  container.innerHTML = "";

  
}

document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const gaSelectDropdown = document.getElementById("gaSelectDropdown");
  if (gaSelectDropdown) {
    gaSelectDropdown.addEventListener("change", handleGASelectStep2);
  }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const gaDropdown = document.getElementById("gaSelectDropdown");
  const blockContainer = document.getElementById("step2SubGABlocksContainer");
  const cloDisplay = document.getElementById("cloDisplayBlock");

  if (!gaDropdown || !blockContainer || !cloDisplay) return;

  gaDropdown.addEventListener("change", () => {
    // Removed code that cleared display to retain existing GA blocks
   
    const label = document.createElement("label");
label.textContent = "Now select a Sub-GA for the GA aboveee1:";
label.style.fontWeight = "bold";
cloDisplay.appendChild(label);

const note = document.createElement("p");
note.textContent = "This option will auto-match the GA you selected above; DO not change the selected option.";
note.style.color = "#6f42c1";  // Bootstrap purple
note.style.fontSize = "0.85rem";
note.style.marginTop = "0.25rem";
cloDisplay.appendChild(note);

    const subgaDropdown = document.createElement("select");
    subgaDropdown.id = "step2SubGADropdown";
    subgaDropdown.style.margin = "1rem 0";
    subgaDropdown.innerHTML = '<option value="">-- Select Sub-GA --</option>';
    Object.keys(cloTemplates).forEach(subga => {
      const opt = document.createElement("option");
      opt.value = subga;
      opt.textContent = subga;
      subgaDropdown.appendChild(opt);
    });

    cloDisplay.appendChild(subgaDropdown);

    const output = document.createElement("div");
    output.id = "cloStructureDisplay";
    cloDisplay.appendChild(output);

    subgaDropdown.addEventListener("change", () => {
      const subga = subgaDropdown.value;
      output.innerHTML = "";

      const template = cloTemplates[subga];
      if (!template) return;

      const sentenceLine = document.createElement("div");
      sentenceLine.className = "ga-line";

      const inputs = [];
      template.template.forEach(part => {
        if (part === "[verb]") {
          const sel = document.createElement("select");
          template.verbs.forEach(v => {
            const opt = document.createElement("option");
            opt.value = v;
            opt.textContent = v;
            sel.appendChild(opt);
          });
          sentenceLine.appendChild(sel);
          inputs.push(sel);
        } else if (part.startsWith("[")) {
          const input = document.createElement("input");
          input.type = "text";
         input.placeholder = cleanPlaceholder(part);
          input.style.width = "280px";
          sentenceLine.appendChild(input);
          inputs.push(input);
        } else {
          const span = document.createElement("span");
          span.textContent = part + " ";
          sentenceLine.appendChild(span);
        }
      });

      const reminderSpan = document.createElement("span");
reminderSpan.textContent = " Do not forget to first save each CLO using the purple button on the left. It will populate below once you save it." 
reminderSpan.style.color = "#d7263d";
reminderSpan.style.fontWeight = "normal";
reminderSpan.style.marginLeft = "1rem";
sentenceLine.appendChild(reminderSpan);
output.appendChild(sentenceLine);

      const example = document.createElement("p");
      example.textContent = "Example: " + template.example;
      example.style.fontStyle = "italic";
      example.style.color = "#6c757d";
      output.appendChild(example);

      
        const btn1 = document.createElement("button");
        btn1.textContent = "Save and Add more CLOs";
        btn1.onclick = () => {
          const inputsCopy = [...inputs];
          const values = template.template.map(part => {
            if (part === "[verb]" || part.startsWith("[")) {
              const v = inputsCopy.shift().value.trim();
              if (!v) return "";
              return v;
            }
            return part;
          });
          if (values.includes("")) return alert("Please complete all parts of the CLO.");
          const cloSentence = values.join(" ");
      const existingSentences = Array.from(ul.children).map(li =>
  li.textContent.trim().replace("Edit", "").replace("Delete", "").trim()
);

      if (existingSentences.includes(cloSentence.trim())) return;
          const idSafe = subga.replace(/\W+/g, "_");

          let block = document.getElementById("block_" + idSafe);
          if (!block) {
            block = document.createElement("div");
            block.id = "block_" + idSafe;
            
  const existingSentences = Array.from(ul.children).map(li =>
  li.textContent.trim().replace("Edit", "").replace("Delete", "").trim()
);

  if (existingSentences.includes(cloSentence.trim())) {
    return; // skip adding duplicate CLO
  }

  const bgColors = ["#e3f2fd", "#fce4ec", "#f3e5f5", "#e8f5e9", "#fff3e0", "#ede7f6", "#f1f8e9", "#fbe9e7"];
  const blockColor = bgColors[Math.floor(Math.random() * bgColors.length)];
  block.style.background = blockColor;

            block.style.border = "2px solid #007bff";
            block.style.padding = "1rem";
            block.style.marginTop = "1rem";
            block.style.borderRadius = "6px";

            const heading = document.createElement("h4");
            heading.textContent = "GA: " + document.getElementById("gaSelectDropdown").value + " | Sub-GA: " + subga;
            heading.style.color = "#007bff";
            block.appendChild(heading);

            const ul = document.createElement("ul");
            ul.id = "cloList_" + idSafe;
            block.appendChild(ul);
block.insertAdjacentHTML("beforeend", `
<p style="margin-top: 0.5rem; color: #dc3545; font-style: italic; font-weight: bold;">
  ‚ö†Ô∏è Avoid clicking Save multiple times for the same CLO.
</p>
`);

            blockContainer.appendChild(block);
          }

          const ul = document.getElementById("cloList_" + idSafe);
          const li = document.createElement("li");
          li.textContent = cloSentence;
          
  const deleteBtn = document.createElement("button");
  deleteBtn.textContent = "Delete";
  deleteBtn.style.marginLeft = "1rem";
  deleteBtn.onclick = () => {
    if (confirm("Are you sure you want to delete this CLO?")) {
      ul.removeChild(li);
    }
  };
  li.appendChild(deleteBtn);
  ul.appendChild(li);
  // Circle-style highlight using outline animation
  const buttonsToHighlight = [
    "Add more CLOs for current GA",
    "No more CLOs for this GA & Add another GA from Step 1",
    "CLOs for all GAs added"
  ];

  buttonsToHighlight.forEach(label => {
    const btn = Array.from(document.querySelectorAll("button"))
      .find(b => b.textContent.trim() === label);
    if (btn) {
      btn.style.transition = "outline 0.5s ease-in-out";
      btn.style.outline = "3px solid #f39c12";
      btn.style.outlineOffset = "4px";
      setTimeout(() => {
        btn.style.outline = "none";
      }, 2000);
    }
  });

  // Temporary floating instruction
  let instruction = document.getElementById("nextStepInstruction");
  if (!instruction) {
    instruction = document.createElement("div");
    instruction.id = "nextStepInstruction";
    instruction.textContent = "Click an appropriate button out of these three.";
    instruction.style.position = "fixed";
    instruction.style.top = "20%";
    instruction.style.left = "50%";
    instruction.style.transform = "translateX(-50%)";
    instruction.style.background = "#fff3cd";
    instruction.style.color = "#856404";
    instruction.style.padding = "1rem 1.5rem";
    instruction.style.border = "2px solid #ffeeba";
    instruction.style.borderRadius = "8px";
    instruction.style.boxShadow = "0px 0px 10px rgba(0,0,0,0.2)";
    instruction.style.zIndex = 10000;
    instruction.style.fontWeight = "bold";
    document.body.appendChild(instruction);

    setTimeout(() => {
      instruction.remove();
    }, 2500);
  }

    

          sentenceLine.scrollIntoView({ behavior: "smooth", block: "center" });
          sentenceLine.classList.add("highlight-label");
          setTimeout(() => sentenceLine.classList.remove("highlight-label"), 2000);
        };

        const btn2 = document.createElement("button");
        btn2.textContent = "Save and move to another GA";
        btn2.style.marginLeft = "1rem";
        btn2.onclick = () => {
          btn1.onclick();
          const label = document.querySelector("label[for='gaSelectDropdown']");
          if (label) {
            label.scrollIntoView({ behavior: "smooth", block: "center" });
            label.classList.add("highlight-label");
            setTimeout(() => label.classList.remove("highlight-label"), 2000);
          }
        };

    });
  });
});</script>
<script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const gaDropdown = document.getElementById("gaSelectDropdown");
  const blockContainer = document.getElementById("step2SubGABlocksContainer");
  const cloDisplay = document.getElementById("cloDisplayBlock");

  if (!gaDropdown || !blockContainer || !cloDisplay) return;

  gaDropdown.addEventListener("change", () => {
    const label = document.createElement("label");
    label.textContent = "Warning: This option will be auto-selected; Do NOT change the auto-selected option.";
label.style.color = "#6f42c1";
    label.style.fontWeight = "bold";
    const helpIcon = document.createElement("span");
    helpIcon.textContent = " (?)";
    helpIcon.title = "This is the text in your above GA before colon sign";
    helpIcon.style.cursor = "help";
    label.appendChild(helpIcon);
    cloDisplay.innerHTML = "";
    cloDisplay.appendChild(label);

    const subgaDropdown = document.createElement("select");
    subgaDropdown.id = "step2SubGADropdown";
    subgaDropdown.style.margin = "1rem 0";
    subgaDropdown.innerHTML = '<option value="">-- Select Sub-GA --</option>';
    Object.keys(cloTemplates).forEach(subga => {
      const opt = document.createElement("option");
      opt.value = subga;
      opt.textContent = subga;
      subgaDropdown.appendChild(opt);
    });
    cloDisplay.appendChild(subgaDropdown);

    const output = document.createElement("div");
    output.id = "cloStructureDisplay";
    cloDisplay.appendChild(output);

    subgaDropdown.addEventListener("change", () => {
      const subga = subgaDropdown.value;
      output.innerHTML = "";

      const template = cloTemplates[subga];
      if (!template) return;

      const example = document.createElement("p");
      example.textContent = "Example: " + template.example;
      example.style.fontStyle = "italic";
      example.style.color = "#6c757d";

      const sentenceLine = document.createElement("div");
      sentenceLine.className = "ga-line";
      const inputs = [];
      template.template.forEach(part => {
        if (part === "[verb]") {
          const sel = document.createElement("select");
          template.verbs.forEach(v => {
            const opt = document.createElement("option");
            opt.value = v;
            opt.textContent = v;
            sel.appendChild(opt);
          });
          sentenceLine.appendChild(sel);
          inputs.push(sel);
        } else if (part.startsWith("[")) {
          const input = document.createElement("input");
          input.type = "text";
         input.placeholder = cleanPlaceholder(part);
          input.style.width = "280px";
          sentenceLine.appendChild(input);
          inputs.push(input);
        } else {
          const span = document.createElement("span");
          span.textContent = part + " ";
          sentenceLine.appendChild(span);
        }
      });

      const reminderSpan = document.createElement("span");
reminderSpan.textContent = "  Do not forget clicking the save (purple) button on the left below for each CLO.";
reminderSpan.style.color = "#d7263d";
reminderSpan.style.fontWeight = "normal";
reminderSpan.style.marginLeft = "1rem";
sentenceLine.appendChild(reminderSpan);
output.appendChild(sentenceLine);
      output.appendChild(example);

      const btnContainer = document.createElement("div");
      btnContainer.style.marginTop = "1rem";

      const saveBtn = document.createElement("button");
      saveBtn.textContent = "Add more CLOs for current GA";
      
saveBtn.onclick = () => {
  const sentenceLine = document.querySelector(".ga-line");
  if (sentenceLine) {
    sentenceLine.classList.add("highlight-label");
    sentenceLine.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => sentenceLine.classList.remove("highlight-label"), 2000);
  }
};



      
  
const btnRow = document.createElement("div");
btnRow.style.display = "flex";
btnRow.style.flexWrap = "wrap";
btnRow.style.gap = "0.5rem";
btnRow.style.marginTop = "1rem";
btnRow.style.justifyContent = "space-between";

// Save this CLO

const saveCLOOnlyBtn = document.createElement("button");
saveCLOOnlyBtn.textContent = "First Click Here to Save the above CLO";
saveCLOOnlyBtn.style.backgroundColor = "#6f42c1";
saveCLOOnlyBtn.onclick = () => {
  // Silent saving without highlight or scroll
  const values = [];
  let valid = true;
  inputs.forEach((el) => {
    const val = el.value.trim();
    if (!val) valid = false;
    values.push(val);
  });

  if (!valid) {
    alert("Please complete all fields.");
    return;
  }

  const cloSentence = template.template.map(part => {
    if (part === "[verb]" || part.startsWith("[")) {
      return values.shift();
    } else {
      return part;
    }
  }).join(" ");

  const idSafe = subga.replace(/[^a-zA-Z0-9_]/g, "_");
  let block = document.getElementById("block_" + idSafe);
  if (!block) {
    block = document.createElement("div");
    block.id = "block_" + idSafe;
    const bgColors = ["#e3f2fd", "#fce4ec", "#f3e5f5", "#e8f5e9", "#fff3e0", "#ede7f6", "#f1f8e9", "#fbe9e7"];
    const blockColor = bgColors[Math.floor(Math.random() * bgColors.length)];
    block.style.background = blockColor;
    block.style.border = "2px solid #007bff";
    block.style.padding = "1rem";
    block.style.marginTop = "1rem";
    block.style.borderRadius = "6px";

    const heading = document.createElement("h4");
    heading.textContent = "GA: " + document.getElementById("gaSelectDropdown").value + " | Sub-GA: " + subga;
    heading.style.color = "#007bff";
    block.appendChild(heading);

    const ul = document.createElement("ul");
    ul.id = "cloList_" + idSafe;
    block.appendChild(ul);
block.insertAdjacentHTML("beforeend", `
<p style="margin-top: 0.5rem; color: #dc3545; font-style: italic; font-weight: bold;">
  ‚ö†Ô∏è Be sure that there are no duplicate CLOs due to entering the buttons repeatedly.
</p>
`);
    blockContainer.appendChild(block);
  }

  const ul = document.getElementById("cloList_" + idSafe);
  const li = document.createElement("li");
  li.textContent = cloSentence;

  const editBtn = document.createElement("button");
  editBtn.textContent = "Edit";
  editBtn.style.marginLeft = "1rem";
  editBtn.onclick = () => {
    const originalText = li.firstChild.textContent;
    li.innerHTML = '';
    const editInput = document.createElement('input');
    editInput.type = 'text';
    editInput.value = cloSentence;
    editInput.style.width = '80%';
    li.appendChild(editInput);

    const saveEdit = document.createElement('button');
    saveEdit.textContent = 'Save';
    saveEdit.style.marginLeft = '1rem';
    saveEdit.onclick = () => {
      li.innerHTML = editInput.value;
      li.appendChild(editBtn);
    };
    li.appendChild(saveEdit);
  };

  li.appendChild(editBtn);

  const deleteBtn = document.createElement("button");
  deleteBtn.textContent = "Delete";
  deleteBtn.style.marginLeft = "1rem";
  deleteBtn.onclick = () => {
    if (confirm("Are you sure you want to delete this CLO?")) {
      ul.removeChild(li);
    }
  };
  li.appendChild(deleteBtn);
  ul.appendChild(li);
  // Circle-style highlight using outline animation
  const buttonsToHighlight = [
    "Add more CLOs for current GA",
    "No more CLOs for this GA & Add another GA from Step 1",
    "CLOs for all GAs added"
  ];

  buttonsToHighlight.forEach(label => {
    const btn = Array.from(document.querySelectorAll("button"))
      .find(b => b.textContent.trim() === label);
    if (btn) {
      btn.style.transition = "outline 0.5s ease-in-out";
      btn.style.outline = "3px solid #f39c12";
      btn.style.outlineOffset = "4px";
      setTimeout(() => {
        btn.style.outline = "none";
      }, 2000);
    }
  });

  // Temporary floating instruction
  let instruction = document.getElementById("nextStepInstruction");
  if (!instruction) {
    instruction = document.createElement("div");
    instruction.id = "nextStepInstruction";
    instruction.textContent = "Click an appropriate button out of these three.";
    instruction.style.position = "fixed";
    instruction.style.top = "20%";
    instruction.style.left = "50%";
    instruction.style.transform = "translateX(-50%)";
    instruction.style.background = "#fff3cd";
    instruction.style.color = "#856404";
    instruction.style.padding = "1rem 1.5rem";
    instruction.style.border = "2px solid #ffeeba";
    instruction.style.borderRadius = "8px";
    instruction.style.boxShadow = "0px 0px 10px rgba(0,0,0,0.2)";
    instruction.style.zIndex = 10000;
    instruction.style.fontWeight = "bold";
    document.body.appendChild(instruction);

    setTimeout(() => {
      instruction.remove();
    }, 2500);
  }

};


// Save this CLO & Add more CLOs for current GA
saveBtn.style.backgroundColor = "#007bff";

// No more CLOs for this GA & Add another GA from Step 1
moveBtn.textContent = "No more CLOs for this GA & Add another GA from Step 1";
moveBtn.style.backgroundColor = "#fd7e14";

// CLOs for all GAs added
const summaryBtn = document.createElement("button");
summaryBtn.textContent = "CLOs for all GAs added";
summaryBtn.style.backgroundColor = "#20c997";
summaryBtn.onclick = () => {
  const target = document.getElementById("showCLOSummaryButton");
  if (target) {
    target.classList.add("highlight-label");
    target.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => target.classList.remove("highlight-label"), 2000);
  }
};

btnRow.appendChild(saveCLOOnlyBtn);
btnRow.appendChild(saveBtn);
btnRow.appendChild(moveBtn);
btnRow.appendChild(summaryBtn);
output.appendChild(btnRow);

    });
  });
});

      const moveBtn = document.createElement("button");
      moveBtn.textContent = "Move to another GA";
      moveBtn.style.marginLeft = "1rem";
      moveBtn.onclick = () => {
        const gaLabel = document.querySelector("label[for='gaSelectDropdown']");
        if (gaLabel) {
          gaLabel.classList.add("highlight-label");
          gaLabel.scrollIntoView({ behavior: "smooth", block: "center" });
          setTimeout(() => gaLabel.classList.remove("highlight-label"), 2000);
        }
      };
      btnContainer.appendChild(moveBtn);



        editBtn.onclick = () => {
          const originalText = li.firstChild.textContent;
          li.innerHTML = '';
          const editInput = document.createElement('input');
          editInput.type = 'text';
          editInput.value = cloSentence;
          editInput.style.width = '80%';
          li.appendChild(editInput);

          const saveEdit = document.createElement('button');
          saveEdit.textContent = 'Save';
          saveEdit.style.marginLeft = '1rem';
          saveEdit.onclick = () => {
            li.innerHTML = editInput.value;
            li.appendChild(editBtn);
          };
          li.appendChild(saveEdit);
        };
        

document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const existingBtn = document.querySelector("button");
  if (existingBtn && existingBtn.textContent.includes("Save and Add CLO for current GA")) {
    const moveBtn = document.createElement("button");
    moveBtn.textContent = "I have added all CLO(s) for this GA, so move to another GA";
    moveBtn.style.marginLeft = "1rem";

    moveBtn.onclick = () => {
      const label = document.querySelector("label[for='gaSelectDropdown']");
      if (label) {
        label.classList.add("highlight-label");
        label.scrollIntoView({ behavior: "smooth", block: "center" });
        setTimeout(() => label.classList.remove("highlight-label"), 2000);
      }
    };

    existingBtn.parentElement.appendChild(moveBtn);
  }
});

document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const saveBtn = Array.from(document.querySelectorAll("button")).find(b => b.textContent.includes("Save and Add CLO for current GA"));
  if (saveBtn && !document.getElementById("cloNoteMsg")) {
    const note = document.createElement("div");
    note.id = "cloNoteMsg";
    note.textContent = "Note: Once you have added all CLOs for current GA, select another GA by choosing an option in 'Choose a GA to Develop a CLO for this Course'";
    note.style.fontSize = "0.85rem";
    note.style.marginTop = "0.5rem";
    note.style.color = "#aa4a00";
    note.style.fontWeight = "bold";
    saveBtn.insertAdjacentElement("afterend", note);
  }
});</script>
<script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const gaDropdown = document.getElementById("gaSelectDropdown");
  if (gaDropdown) {
    gaDropdown.addEventListener("change", () => {
      setTimeout(() => {
        const label = Array.from(document.querySelectorAll("label"))
          .find(el => el.textContent.trim().startsWith("Now select a Sub-GA"));
        if (label) {
          label.classList.add("highlight-label");
          label.scrollIntoView({ behavior: "smooth", block: "center" });
          setTimeout(() => label.classList.remove("highlight-label"), 2000);
        }
      }, 100);
    });
  }
});
</script><script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const subGADropdown = document.getElementById("step2SubGADropdown");
  if (subGADropdown) {
    subGADropdown.addEventListener("change", () => {
      setTimeout(() => {
        const structureBlock = document.getElementById("cloLineInputs");
        if (structureBlock) {
          structureBlock.classList.add("highlight-label");
          structureBlock.scrollIntoView({ behavior: "smooth", block: "center" });
          setTimeout(() => structureBlock.classList.remove("highlight-label"), 2000);
        }
      }, 200);
    });
  }
});
</script><script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const saveBtn = Array.from(document.querySelectorAll("button")).find(btn =>
    btn.textContent.includes("Save and Add CLO for current GA")
  );

  if (saveBtn && !document.getElementById("cloInstructionNote")) {
    const note = document.createElement("div");
    note.id = "cloInstructionNote";
    note.textContent = "Note: (1) Once you have added all CLOs for current GA, select another GA by choosing an option in 'Choose a GA to Develop a CLO for this Course.' (2) Ensure that you do not click this button twice for a single CLO; otherwise CLO might be duplicated.";
    note.style.fontSize = "0.85rem";
    note.style.marginTop = "0.5rem";
    note.style.color = "#b85c00";
    note.style.fontWeight = "bold";
    saveBtn.insertAdjacentElement("afterend", note);
  }
});
</script><script>
document.getElementById("showCLOSummaryButton").addEventListener("click", function() {
  const summaryDiv = document.getElementById("cloSummaryTable");
  summaryDiv.innerHTML = "";

  const table = document.createElement("table");
  table.style.width = "100%";
  table.style.borderCollapse = "collapse";
  table.style.marginTop = "1rem";

  const header = table.insertRow();
  ["Graduate Attributes", "Course Learning Outcomes (aligned with GAs)"].forEach(text => {
    const th = document.createElement("th");
    th.textContent = text;
    th.style.border = "1px solid #ccc";
    th.style.padding = "8px";
    th.style.background = "#007bff";
    th.style.color = "white";
    table.appendChild(th);
    header.appendChild(th);
  });

  const blocks = document.querySelectorAll("div[id^='block_']");
  blocks.forEach(block => {
    const subga = block.querySelector("h4")?.textContent?.replace("Sub-GA: ", "") || "";
    const gaDropdown = document.getElementById("gaSelectDropdown");
    const headingText = block.querySelector("h4")?.textContent || "";
    const [gaPart, subgaPart] = headingText.split(" | Sub-GA: ");
    const selectedGA = gaPart?.replace("GA: ", "") || "";
    const cloItems = block.querySelectorAll("li");
    cloItems.forEach(clo => {
      const row = table.insertRow();
      [selectedGA, clo.textContent.replace("Edit", "").replace("Delete", "").trim()].forEach(text => {
        const td = document.createElement("td");
        td.textContent = text;
        td.style.border = "1px solid #ccc";
        td.style.padding = "8px";
        row.appendChild(td);
      });
    });
  });

  
  
  const heading = document.createElement("div");
  heading.style.marginTop = "1.5rem";
  heading.style.color = "#003366";
  heading.style.textAlign = "center";
  heading.innerHTML = "<strong>Graduate Attributes and Course Learning Outcomes</strong><br/><em>(inspired from NHQEF and NEP-2020)</em>";

  heading.style.marginTop = "1.5rem";
  heading.style.color = "#003366";
  summaryDiv.appendChild(heading);

  const program = document.getElementById("programName")?.value || "Not specified";
  const course = document.getElementById("courseNameStep2")?.value || "Not specified";
  const contextInfo = document.createElement("p");
  contextInfo.innerHTML = "<strong>Program:</strong> " + program + " &nbsp;&nbsp; <strong>Course:</strong> " + course;
  summaryDiv.appendChild(contextInfo);

  summaryDiv.appendChild(table);

 const footer = document.createElement("div");
footer.style.marginTop = "1rem";
footer.innerHTML = `
  <p style="font-family: 'Georgia', serif; font-size: 1rem; color: #2c3e50; font-style: italic;">
    &#10024; Best wishes,<br/><strong style="font-size: 1.05rem;">Praveen Chhikara</strong>
  </p>
  <p><strong>Notes:</strong></p>
  <p style="font-family: 'Consolas', monospace; font-size: 0.95rem;">
    This tool is inspired by the NHQEF framework (UGC, 2022) and NEP 2020 policy documents, recognizes two types of Graduate Attributes (GAs): <strong>Standard</strong> and <strong>Aspirational</strong>.<br/>
    ‚Äì <strong>Standard</strong> types closely follow NHQEF recommendations for Level 4.5.<br/>
    ‚Äì <strong>Aspirational</strong> types include <em>Student Contribution</em> and <em>Subject Evolution</em> for student-centered learning and humanized learning outcomes to better align with NEP 2020‚Äôs emphasis on holistic development. These categories connect to <strong>Praveen Chhikara‚Äôs</strong> research area in the context of mathematics at university/college levels.<br/><br/>
    If you have any questions, feel free to reach out to <strong>Praveen Chhikara</strong>.
  </p>
`;
summaryDiv.appendChild(footer);

  summaryDiv.style.display = "block";
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const gaDropdown = document.getElementById("gaSelectDropdown");

  gaDropdown.addEventListener("change", () => {
    const selectedGA = gaDropdown.value.trim();

    // Find matching sub-GA
    const allSubGAs = [].concat(...Object.values(gaOptions));
    const match = allSubGAs.find(sub => selectedGA.startsWith(sub));

    setTimeout(() => {
      const subGADropdown = document.getElementById("step2SubGADropdown");
      if (subGADropdown && match) {
        subGADropdown.value = match;
        subGADropdown.dispatchEvent(new Event("change"));
      }
    }, 500);
  });
});
</script>
<script>
function showHintPopup() {
  const label = document.querySelector("label[for='broadGA']");
  const popup = document.getElementById("gaHintPopup");
  if (label && popup) {
    const rect = label.getBoundingClientRect();
    popup.style.top = (window.scrollY + rect.top - 45) + "px";
    popup.style.left = (window.scrollX + rect.left + 150) + "px";
    popup.style.display = "block";
    setTimeout(() => popup.style.display = "none", 2500);
  }
}
</script>
<script>
function scrollAndHighlightCourseInput() {
  const label = document.querySelector("label[for='courseNameStep2']");
  const popup = document.getElementById("courseHintPopup");
  if (label) {
    label.classList.add("highlight-label");
    label.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => label.classList.remove("highlight-label"), 2000);

    if (popup) {
      const rect = label.getBoundingClientRect();
      popup.style.top = (window.scrollY + rect.top - 45) + "px";
      popup.style.left = (window.scrollX + rect.left + 200) + "px";
      popup.style.display = "block";
      setTimeout(() => popup.style.display = "none", 2500);
    }
  }
}
</script>
<script>
function showCLOHintPopup() {
  const line = document.querySelector(".ga-line");
  const popup = document.getElementById("cloHintPopup");
  if (line && popup) {
    const rect = line.getBoundingClientRect();
    popup.style.top = (window.scrollY + rect.top - 45) + "px";
    popup.style.left = (window.scrollX + rect.left + 200) + "px";
    popup.style.display = "block";
    setTimeout(() => popup.style.display = "none", 2500);
  }
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {


document.getElementById("zerothSelect").addEventListener("change", function () {
  const selectedCategory = this.value;
  populateBroadGAs(selectedCategory);

  // Scroll and highlight "Select a Sub-Graduate Attribute:"
  const broadLabel = document.querySelector('label[for="broadGA"]');
  if (broadLabel) {
    broadLabel.classList.add("highlight-label");
    broadLabel.scrollIntoView({ behavior: "smooth", block: "center" });
    setTimeout(() => broadLabel.classList.remove("highlight-label"), 2000);
  }
});


  const btns = Array.from(document.querySelectorAll("button")).filter(b => b.textContent.trim() === "Move to another GA");
  btns.forEach(btn => {
    btn.addEventListener("click", () => {
      const label = document.querySelector("label[for='gaSelectDropdown']");
      if (!label) return;

      // Scroll and highlight
      label.classList.add("highlight-label");
      label.scrollIntoView({ behavior: "smooth", block: "center" });
      setTimeout(() => label.classList.remove("highlight-label"), 2000);

      // Pop-up
      let popup = document.getElementById("moveGAPopup");
      if (!popup) {
        popup = document.createElement("div");
        popup.id = "moveGAPopup";
        popup.style.position = "absolute";
        popup.style.background = "#fff4e5";
        popup.style.color = "#b85c00";
        popup.style.border = "1px solid #f0ad4e";
        popup.style.padding = "0.6rem";
        popup.style.borderRadius = "5px";
        popup.style.boxShadow = "2px 2px 5px rgba(0,0,0,0.2)";
        popup.style.zIndex = 1000;
        popup.style.fontWeight = "bold";
        popup.innerText = "üîÅ Change to another GA";
        document.body.appendChild(popup);
      }

      const rect = label.getBoundingClientRect();
      popup.style.top = (window.scrollY + rect.top - 45) + "px";
      popup.style.left = (window.scrollX + rect.left + 200) + "px";
      popup.style.display = "block";

      setTimeout(() => {
        popup.style.display = "none";
      }, 2500);
    });
  });
});
</script>
<script>
function obsoleteDownloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  let y = 15;

  doc.setFontSize(16);
  doc.setFont("helvetica", "bold");
  doc.text("Graduate Attributes and Course Learning Outcomes", 105, y, { align: "center" });

  y += 7;
  doc.setFont("times", "italic");
  doc.setFontSize(11);
  doc.text("(inspired from NHQEF and NEP-2020)", 105, y, { align: "center" });

  y += 10;
  doc.setFont("helvetica", "normal");
  doc.setFontSize(11);
  doc.text("Prepared by Praveen Chhikara (based on emerging interpretation)", 14, y);
  y += 7;
  doc.setFont("times", "italic");
  doc.text("Program: BSc", 14, y);
  y += 6;
  doc.text("Course: Calculus", 14, y);

  y += 10;
  doc.setFillColor(0, 102, 204);
  doc.setTextColor(255, 255, 255);
  doc.rect(14, y - 5, 182, 8, "F");
  doc.setFontSize(11);
  doc.setFont("helvetica", "bold");
  doc.text("Graduate Attribute (GA)", 16, y);
  doc.text("Course Learning Outcome (CLOs)", 116, y);
  y += 10;
  doc.setFont("helvetica", "normal");
  doc.setTextColor(0, 0, 0);

  const rows = document.querySelectorAll("#cloSummaryTable table tr:not(:first-child)");
  rows.forEach(row => {
    const cells = row.querySelectorAll("td");
    if (cells.length >= 2) {
      const ga = doc.splitTextToSize(cells[0].textContent.trim(), 90);
      const clo = doc.splitTextToSize(cells[1].textContent.trim(), 90);
      const lineCount = Math.max(ga.length, clo.length);
      for (let i = 0; i < lineCount; i++) {
        if (y > 270) { doc.addPage(); y = 15; }
        doc.text(ga[i] || "", 16, y);
        doc.text(clo[i] || "", 116, y);
        y += 6;
      }
      y += 3;
    }
  });

  y += 5;
  doc.setFont("times", "italic");
  doc.text("Best wishes,", 14, y);
  y += 6;
  doc.setFont("helvetica", "bold");
  doc.text("Praveen Chhikara", 14, y);

  y += 8;
  doc.setFont("helvetica", "normal");
  doc.setFontSize(10);
  doc.text("Notes:", 14, y);
  y += 6;
  const noteText = "This guide is inspired from the NHQEF framework and NEP 2020 policy documents
"
                 + "with additional attributes added to support holistic education goals.
"
                 + "If you have any questions, feel free to reach out to Praveen.";
  doc.text(noteText, 14, y);

  doc.save("GA_CLOs_Report.pdf");
}

document.getElementById("showCLOSummaryButton").addEventListener("click", function () {
  const summaryDiv = document.getElementById("cloSummaryTable");
  if (!summaryDiv) return;

  summaryDiv.innerHTML = "";

  const blocks = document.querySelectorAll(".ga-block");
  if (blocks.length === 0) {
    alert("No GA blocks found. Please add CLOs before generating the table.");
    return;
  }

  const table = document.createElement("table");
  table.style.width = "100%";
  table.style.borderCollapse = "collapse";

  const headerRow = document.createElement("tr");
  ["Graduate Attributes", "Course Learning Outcomes (aligned with GAs)"].forEach(header => {
    const th = document.createElement("th");
    th.textContent = header;
    th.style.border = "1px solid #ccc";
    th.style.padding = "8px";
    th.style.backgroundColor = "#f2f2f2";
    headerRow.appendChild(th);
  });
  table.appendChild(headerRow);

  blocks.forEach(block => {
    const headingText = block.querySelector("h4")?.textContent || "";
    const ga = headingText.split(" | Sub-GA: ")[0]?.replace("GA: ", "") || "";
    const cloListItems = block.querySelectorAll("ul li");
    cloListItems.forEach(clo => {
      const row = document.createElement("tr");

      const gaCell = document.createElement("td");
      gaCell.textContent = ga;
      gaCell.style.border = "1px solid #ccc";
      gaCell.style.padding = "8px";

      const cloCell = document.createElement("td");
      const cloSpan = clo.querySelector("span") || clo.firstChild;
      cloCell.textContent = (cloSpan?.textContent || "").trim();
      cloCell.style.border = "1px solid #ccc";
      cloCell.style.padding = "8px";

      row.appendChild(gaCell);
      row.appendChild(cloCell);
      table.appendChild(row);
    });
  });

  
  
  const heading = document.createElement("div");
  heading.style.marginTop = "1.5rem";
  heading.style.color = "#003366";
  heading.style.textAlign = "center";
  heading.innerHTML = "<strong>Graduate Attributes and Course Learning Outcomes</strong><br/><em>(inspired from NHQEF and NEP-2020)</em>";

  heading.style.marginTop = "1.5rem";
  heading.style.color = "#003366";
  summaryDiv.appendChild(heading);

  const program = document.getElementById("programName")?.value || "Not specified";
  const course = document.getElementById("courseNameStep2")?.value || "Not specified";
  const contextInfo = document.createElement("p");
  contextInfo.innerHTML = "<strong>Program:</strong> " + program + " &nbsp;&nbsp; <strong>Course:</strong> " + course;
  summaryDiv.appendChild(contextInfo);

  summaryDiv.appendChild(table);

  
});
</script>
<script>
let isFormDirty = false;

document.addEventListener("DOMContentLoaded", () => {
  // Watch for any changes in inputs, selects, textareas
  const inputs = document.querySelectorAll("input, textarea, select");

  inputs.forEach(input => {
    input.addEventListener("input", () => {
      isFormDirty = true;
    });
  });

  window.addEventListener("beforeunload", function (e) {
    if (isFormDirty) {
      e.preventDefault();
      e.returnValue = ""; // This triggers the browser's confirmation dialog
    }
  });
});
</script>

<div id="introBox">
<h3 style="margin-top: 0; color: #4b0082;">Contact information of Praveen Chhikara</h3>
<p><strong>Praveen Chhikara</strong> is a passionate researcher in <em>mathematics education</em>, working in the United States.</p>
<p>His work explores innovative ways to connect student-centered mathematical thinking, Indian/global history of mathematics, and pedagogy‚Äîespecially in university and college classrooms.</p>
<p>üì¨ Email: chhikara.praveen18@gmail.com </p>
 <p>üîó <a href="https://www.linkedin.com/in/praveenchhikara/" target="_blank">Connect with him on LinkedIn</a>
</p>
</div>
<div style="max-width: 800px; margin: 1.5rem auto; padding: 1rem 1.5rem; background-color: #fff3cd; border-left: 6px solid #ffbf00; border-radius: 8px; font-size: 0.95rem; color: #4a4a4a; line-height: 1.5;">
<p><strong>Sources:</strong>.</p>
<p> National Higher Education Qualifications Framework (NHEQF). (n.d.). Retrieved July 4, 2025, from https://www.hpuniv.ac.in/upload/downloads/67727e1d692daNHEQF-merged-compressed.pdf
</p>
<p> National Education Policy (NEP) 2020. Retrieved July 7, 2025, from https://www.education.gov.in/sites/upload_files/mhrd/files/NEP_Final_English_0.pdf</p>
</div>

<!-- Heading -->
<h2>üí¨ Comments, Feedback, and Questions</h2>

<!-- Cusdis Embed -->
<div id="cusdis_thread"
  data-host="https://cusdis.com"
  data-app-id="3cf64386-6a09-46ba-af17-03a3b1852bca"
  data-page-id="{{ PAGE_ID }}"
  data-page-url="{{ PAGE_URL }}"
  data-page-title="{{ Learning Outcomes Planner }}"
  data-lang="custom">
</div>

<!-- Load Cusdis -->
<script async defer src="https://cusdis.com/js/cusdis.es.js"></script>

<!-- Custom Labels -->
<script>
  window.CUSDIS_LOCALE = {
    nickname: 'Name (Write "Anonymous" if you do not want to write your name)',
    email: 'Email (optional)',
   reply_placeholder: 'üí¨ Write your comment in the box below. ‚¨áÔ∏è Use scrollbar on the right to find the submit button and view other comments...',
    submit: 'Submit',
    no_comments: 'No comments yet.',
    comments: 'Comments',
    cancel_reply: 'Cancel',
    reply: 'Reply',
    submitting: 'Submitting...',
    submit_success: 'Comment submitted!',
    required_error: 'Please fill out required fields',
  };
</script>

<!-- Auto-fill "Anonymous" if name is left blank -->
<script>
  window.addEventListener('message', function (event) {
    if (event.data && event.data.type === 'cusdis-loaded') {
      const iframe = document.querySelector('iframe.cusdis-iframe');
      if (!iframe) return;

      iframe.contentWindow.postMessage({
        type: 'cusdis-custom-script',
        payload: `
          const nicknameInput = document.querySelector('input#nickname');
          const form = document.querySelector('form');
          if (form && nicknameInput) {
            form.addEventListener('submit', () => {
              if (!nicknameInput.value.trim()) {
                nicknameInput.value = 'Anonymous';
              }
            });
          }
        `
      }, '*');
    }
  });
</script>

<!-- Optional: Hide email field -->
<style>
  #cusdis_thread label[for="email"],
  #cusdis_thread input#email {
    display: none !important;
  }
</style>



</body>
</html>
